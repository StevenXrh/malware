import virustotalUtils.virus_api as vi
import re
if __name__ == '__main__':
    patten = re.compile('_(.*?).exe')
    with open('virustotalUtils/ls.txt','r') as f:
        md5 = patten.findall(f.read())

    result = []
    count = 1
    err = []
    with open('classifier.txt','a') as f :
        for i in md5:
            try:
                res = ' '.join('%s' %a for a in vi.VirustotalUtils(md5=i).api_utils())
            except:
                print('{}与官网的链接错误'.format(i))
                err.append(i)
            print('成功读取{}条'.format(count))
            count += 1
            f.write('\n' + res)
    f.write(' '.join('%s' %a for a in err))